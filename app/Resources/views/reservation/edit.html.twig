{% extends 'base.html.twig' %}
{% block menu %}
<input class="form-control" id="time1" type="hidden" value="{{ time1 }}" readonly>
<input class="form-control" id="time2" type="hidden" value="{{ time2 }}" readonly>
<div class="subnavbar">
  <div class="subnavbar-inner">
    <div class="container">
      <ul class="mainnav">
        <li><a href="{{path('accueil')}}"><i class="icon-dashboard"></i><span>Tableau de Bord</span> </a> </li>
        <li><a href="{{path('voiture_index')}}"><i class="fa fa-automobile"></i><span>Vehicule</span> </a> </li>
        <li><a href="{{path('client_index')}}"><i class="shortcut-icon icon-user"></i><span>Client</span> </a></li>
        <li class="active"><a href="{{path('reservation_index')}}"><i class="shortcut-icon icon-save"></i><span>Reservation</span> </a> </li>
        <li><a href="{{path('csr_index')}}"><i class="shortcut-icon icon-edit"></i><span>Contrat</span> </a> </li>
        <li><a href="{{path('paiement_index')}}"><i class="shortcut-icon icon-random"></i><span>Paiement</span> </a> </li>
        <li><a href="{{path('facture_index')}}"><i class="shortcut-icon icon-list-alt"></i><span>Facture</span> </a> </li>
      </ul>
    </div>
  </div>
</div>
{% endblock %}
{% block body %}
<div class="main">
  <div class="main-inner">
    <div class="container">
      <div class="row">
        <div class="span12">
    <h1>Modifier réservation</h1>

    {{ form_start(edit_form) }}
	<div class="row">
      <div class="span4">
        <div>
           <div >{{ form_label(edit_form.numReservation) }}</div>
           {{ form_errors(edit_form.numReservation) }}
           <div>{{ form_widget(edit_form.numReservation,{'attr':{'readonly' : "readonly"}}) }}</div>
        </div>
        <div>
          <strong><span style="color:red;">{{ errors }}</span></strong>
           <div >{{ form_label(edit_form.dateDebut) }}</div>
           {{ form_errors(edit_form.dateDebut) }}
           <div>{{ form_widget(edit_form.dateDebut, {'attr': {'onchange': 'calculDuree1()'}}) }}</div>
        </div>
        <div>
           <div >{{ form_label(edit_form.dateFin) }}</div>
           {{ form_errors(edit_form.dateFin) }}
           <div>{{ form_widget(edit_form.dateFin, {'attr': {'onchange': 'calculDuree()'}}) }}</div>
        </div>
      </div>
      <div class="span4">
        <div>
           <div >{{ form_label(edit_form.dateResevation) }}</div>
           {{ form_errors(edit_form.dateResevation) }}
           <div>{{ form_widget(edit_form.dateResevation, {'attr': {'readonly' : "readonly"}}) }}</div>
        </div>
        <div>
           <div >{{ form_label(edit_form.nbreJour) }}</div>
           {{ form_errors(edit_form.nbreJour) }}
           <div>{{ form_widget(edit_form.nbreJour, {'attr': {'readonly' : "readonly"}}) }}</div>
        </div>
      </div>
      <div class="span3">
        <div>
           <div >{{ form_label(edit_form.refClient) }}</div>
           {{ form_errors(edit_form.refClient) }}
           <div>{{ form_widget(edit_form.refClient,{'attr': {'class':'chosen-select'}}) }}</div>
        </div>
        <div>
           <div >{{ form_label(edit_form.refVoiture) }}</div>
           {{ form_errors(edit_form.refVoiture) }}
           <div style="display:none;">{{ form_widget(edit_form.refVoiture,{'attr': {'class':'chosen-select',  'readonly' : "readonly"}}) }}</div>
           <input type="text" value="{{ voiture }}" readonly>
		</div>
    <br>
    <div>
            <input type="submit" class="btn btn-success" value="Modifier" />
        </div>
      </div>
    </div>    
        
    {{ form_end(edit_form) }}
    <br><br><br><br><br><br><br><br><br>
</div></div></div></div></div>
{% endblock %}
{% block javascripts %}
<script>
  function calculDuree() {
 var time1 = $('#lv_locationbundle_reservation_dateDebut').val(), time2 = $('#lv_locationbundle_reservation_dateFin').val(),result = $("#lv_locationbundle_reservation_nbreJour");
 var d1 = new Date(time1).getTime(); 
 var d2 = new Date(time2).getTime();
 var msec = d2 - d1; //get difference in milliseconds
    
    
    if (parseInt(msec) > 0) {
        hh = Math.floor(msec / 1000 / 60 / 60); //get hours
        dd = Math.floor(hh / 24); //calculate days
        msec -= hh * 1000 * 60 * 60; //remove hours from msec
        hh -= dd * 24; //remove days from hours
        var mm = Math.floor(msec / 1000 / 60); //get minutes
        result.val(dd + ' jours ,' + hh + ' heures ,' + mm + ' minutes');
        //var jours = dd;
        // document.getElementById('lv_locationbundle_reservation_nbreJour').value=dd + ' jours ,' + hh + ' heures ,' + mm + ' minutes';
        }
    /*else  if (parseInt(msec) == 0) {
        result.val('1 jours , 0  heures , 0  minutes');
        document.getElementById('form_duree').value='1 jours , 0  heures , 0  minutes';
        }*/
        else {
        alert("La date d'arrivée doît être supérieur à la date de départ");
        var time2 = $('#time2').val();
        $("#lv_locationbundle_reservation_dateFin").val(time2);
        /*document.getElementById("lv_locationbundle_reservation_dateDebut").value=time1;
        document.getElementById("lv_locationbundle_reservation_dateFin").value=time1;
        result.val('1 jours , 0  heures , 0  minutes');
        document.getElementById('lv_locationbundle_reservation_nbreJour').value='1 jours , 0  heures , 0  minutes';*/
        }
        }
        ;
        function calculDuree1() {
 var time1 = $('#lv_locationbundle_reservation_dateDebut').val(), time2 = $('#lv_locationbundle_reservation_dateFin').val(),result = $("#lv_locationbundle_reservation_nbreJour");
 var d1 = new Date(time1).getTime(); 
 var d2 = new Date(time2).getTime();
 var msec = d2 - d1; //get difference in milliseconds
    
    
    if (parseInt(msec) > 0) {
        hh = Math.floor(msec / 1000 / 60 / 60); //get hours
        dd = Math.floor(hh / 24); //calculate days
        msec -= hh * 1000 * 60 * 60; //remove hours from msec
        hh -= dd * 24; //remove days from hours
        var mm = Math.floor(msec / 1000 / 60); //get minutes
        result.val(dd + ' jours ,' + hh + ' heures ,' + mm + ' minutes');
        //var jours = dd;
        // document.getElementById('lv_locationbundle_reservation_nbreJour').value=dd + ' jours ,' + hh + ' heures ,' + mm + ' minutes';
        }
    /*else  if (parseInt(msec) == 0) {
        result.val('1 jours , 0  heures , 0  minutes');
        document.getElementById('form_duree').value='1 jours , 0  heures , 0  minutes';
        }*/
        else {
        alert("La date d'arrivée doît être supérieur à la date de départ");
        var time1 = $('#time1').val();
        $("#lv_locationbundle_reservation_dateDebut").val(time1);
        /*document.getElementById("lv_locationbundle_reservation_dateDebut").value=time1;
        document.getElementById("lv_locationbundle_reservation_dateFin").value=time1;
        result.val('1 jours , 0  heures , 0  minutes');
        document.getElementById('lv_locationbundle_reservation_nbreJour').value='1 jours , 0  heures , 0  minutes';*/
        }
        }
        ;
</script>
 <script>
 var time1 = $('#time1').val(), time2 = $('#time2').val();
  $(document).ready(function() {
    $("#lv_locationbundle_reservation_dateDebut").val(time1);
    $("#lv_locationbundle_reservation_dateFin").val(time2);

});
 </script>
{% endblock %}